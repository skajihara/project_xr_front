# タスク一覧

## ＜上から順に消化していこう＞

- 基本画面を実装する（あとはプロフィール画面）：✅
- 全ての画面遷移をappRouterに置き換える：✅
- APIによるデータ取得を全てhooksに移行する：✅
- データ型の定義をtypesフォルダに整理してインポートして使うよう修正する：✅
- 予約ツイートしたら予約ツイート一覧を最新データで再描画する：✅
- 404 Not Found ページ：✅
- 自分のツイート編集削除機能実装：✅
- hooksをSWR＋suspenseモードに書き換え：✅
- テスト環境セットアップ（Jest + React Testing Library）：✅
- フックの単体テストを作成する：✅
- コンポーネントの単体テストを作成する：
- 最低限のスタイリング：
- APIの呼び出しがパラメータとパス変数で別れている（db.jsonのせい）からサーバと連携したら全てパス変数に統一する：

---

# コンポーネントテストの方針

| 種類              | 目的                          | 例                        |
| :---------------- | :----------------------------- | :------------------------ |
| **レンダリングテスト** | 正しく画面に要素が表示されるか確認       | タイトルやボタンがあるか？           |
| **イベントテスト**    | ユーザー操作に対して正しい動作をするか確認  | ボタン押したら画面遷移するか？         |
| **副作用テスト**     | データ取得・送信・ストア更新とか裏で何か起きるか確認 | フォーム送信でfetchされるか？          |

## テスト手順
1. レンダリングテストだけ先に作る
2. ユーザー操作（イベント）テストを追加する
3. 必要なら副作用（fetch呼び出し・store更新）テストも追加する

---

# テスト優先度

| ファイル                                                                 | 役割                  | 優先テスト対象？         |
| :--------------------------------------------------------------------- | :------------------ | :--------------- |
| `Timeline`, `ProfileTweets`, `MyTweetSchedule`                         | **リスト系**            | ✅（データフェッチ＋リスト表示） |
| `TweetForm`, `ScheduleTweetForm`                                       | **フォーム系**           | ✅（入力→submit系）    |
| `TweetCard`, `ScheduledTweetCard`                                      | **カードUI**           | ✅（単体表示確認できる）     |
| `TweetDetail`, `ScheduledTweetDetail`                                  | **詳細画面＋編集削除ロジックあり** | ✅（イベント検証アリ）      |
| `ProfileHeader`, `RecommendedUsers`, `TrendTopics`                     | **プロフィール・サイド表示**    | ✅（データフェッチ検証）     |
| `MyProfile`, `SideMenu`                                                | **ログアウト・リンク機能あり**   | ✅（イベント検証できる）     |
| `AuthWrapper`, `CenterArea`, `LeftArea`, `RightArea`, `NotFoundClient` | **レイアウト・ラッパー系**     | △（基本は後回しで）     |

---

# テスト作成ポリシー

- 画面に出る
- 独立してテストしやすい
- ロジックがあるコンポーネントを優先する
- レイアウトラッパー系は後回し
- react-error-boundaryはEMSをサポートしていないため、コンポーネントの単体テストはjestではなくVitestで作成する

---

# テスト作成順序

- リスト系：
- フォーム系：
- カードUI：
- 詳細画面、編集削除ロジック：
- プロフィール、サイド表示：
- ログアウト、リンク機能：
- レイアウト・ラッパー系：

---

# リスト系テスト観点

- それぞれフェッチ成功してリストが表示されるか
- フェッチ失敗時のエラー表示確認
- 空リストなら「まだツイートがないよ」表示があるならそれも確認

---

# 注意事項

どうやらプロジェクト特有の問題で、jestでもvitestでもコンポーネントの単体テストが成功しないらしい。
Next.js App Router + SWR（suspense: true）構成だと、"ただレンダリングすれば終わり"ではない。
- suspense解除待ちが必要だが
- useSWRのPromise内部を強制同期化　または　Suspense fallbackからresolveされるまで待機
- テストコードでact()管理する必要がある
- `ErrorBoundaryをモックしてしまえば良い`
